# Water Quality Prediction System

## Описание

**Water Quality Prediction System** — это комплексное веб-приложение для анализа, прогнозирования и визуализации качества воды в водоёмах на основе машинного обучения. Система позволяет пользователям загружать данные, получать предсказания по качеству воды, просматривать историю анализов, формировать отчёты и работать с картой водоёмов.

---

## Структура проекта

```
├── backend/                # Бэкенд на FastAPI + SQLAlchemy
│   ├── app/
│   │   ├── api/            # Эндпоинты API
│   │   ├── core/           # Конфиг, обработка ошибок, безопасность
│   │   ├── database/       # Миграции, модели, подключение к БД
│   │   ├── schemas/        # Pydantic-схемы для валидации данных
│   │   ├── services/       # ML-сервисы, генерация отчётов, история
│   ├── requirements.txt    # Зависимости Python
│   └── sql_app.db          # SQLite база данных
│
├── frontend/               # Фронтенд на React
│   ├── public/             # Статические файлы, изображения
│   ├── src/
│   │   ├── api/            # Запросы к бэкенду
│   │   ├── components/     # UI-компоненты (карта, отчёты, история и др.)
│   │   ├── hooks/          # Кастомные хуки
│   │   ├── pages/          # Страницы приложения
│   │   ├── store/          # Redux store
│   ├── package.json        # Зависимости JS
│
├── models_for_water-main/  # ML-модели и скрипты обучения
│   ├── datasets/           # CSV-датасеты
│   ├── educate_models/     # Скрипты обучения CatBoost и LSTM
│   ├── models/             # Сохранённые модели (.cbm, .pth)
│   ├── test_models/        # Тестирование моделей
│   ├── create_dataset/     # Генерация датасетов
│
└── README.md               # Описание проекта
```

---

## Основные возможности

- **Аутентификация пользователей** (регистрация, вход)
- **Загрузка данных о водоёмах** (ручной ввод, загрузка CSV)
- **Автоматическое определение координат водоёма** по названию
- **Прогнозирование качества воды** с помощью CatBoost и LSTM
- **Визуализация результатов** (графики, карта)
- **История анализов** и просмотр прошлых предсказаний
- **Генерация PDF-отчётов**
- **Профиль пользователя** и статистика

---

## Быстрый старт

### 1. Клонирование репозитория

```sh
git clone <адрес_репозитория>
cd water_analysis
```

### 2. Установка и запуск бэкенда

```sh
cd backend
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
uvicorn app.main:app --reload
```

- Бэкенд будет доступен по адресу: `http://localhost:8000`

### 3. Установка и запуск фронтенда

```sh
cd frontend
npm install
npm start
```

- Фронтенд будет доступен по адресу: `http://localhost:3000`

### 4. Подготовка моделей машинного обучения

- Для обучения моделей используйте скрипты:
  - CatBoost: `models_for_water-main/educate_models/educate_catboost.py`
  - LSTM: `models_for_water-main/educate_models/educate_LSTM.py`
- Готовые модели должны лежать в `models_for_water-main/models/`

---

## Используемые технологии

- **Backend:** Python, FastAPI, SQLAlchemy, Pydantic, JWT
- **Frontend:** React, Redux, Axios, Leaflet
- **ML:** CatBoost, PyTorch (LSTM), scikit-learn, pandas
- **База данных:** SQLite

---

## Взаимодействие слоёв

1. **Пользователь** вводит данные или загружает CSV через фронтенд.
2. **Фронтенд** определяет координаты водоёма по названию (через внешний геосервис).
3. **Данные отправляются на бэкенд** через API.
4. **Бэкенд** валидирует данные, вызывает ML-сервисы для предсказания.
5. **Результаты сохраняются в БД** и возвращаются пользователю.
6. **Пользователь** может просматривать историю, генерировать отчёты, видеть результаты на карте.

---


